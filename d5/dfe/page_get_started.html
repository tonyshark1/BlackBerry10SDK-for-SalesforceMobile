<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Blackberry10SDKforSalesforceMobile: Get Started</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Blackberry10SDKforSalesforceMobile
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Blackberry10.2+SDKforSalesforceMobile</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/dfe/page_get_started.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Get Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Blackberry 10 SDK for SalesforceMobile is easy to use with little amount of setup work required. The setup process requires basic knowledge of Git, EGit for Eclipse, Eclipse CDT/Momentics, Blackberry Cascades packaging process and Salesforce.com authentication procedures. The steps involve downloading/importing SDK project, creating new Blackberry 10 Cascades application, linking against Cascades shared libraries and a few lines of code. We have created a template application project so you can get started quickly. The sections below will walk you through the steps required to get your first application going.</p>
<h1><a class="anchor" id="section_setup"></a>
Setup Your Project</h1>
<p>Use the EGit for Eclipse plugin from within the Momentics IDE to clone the repository. To do this, go to the <b>Git Repository Exploring</b> perspective, click on <b>Clone a Git Repository</b> and follow the on screen instructions.</p>
<p>After this is completed, you should see the SalesforceMobileSDK-BlackBerry10 repo listed under the <b>Git Repositories</b> view. Under the <b>Working Directory</b> folder you should see the following projects:</p>
<ul>
<li>SalesforceSDK</li>
<li>SalesforceAppTemplate</li>
<li>SalesforceSDKDemo</li>
<li>SalesforceSDKHybridDemo</li>
</ul>
<h2><a class="anchor" id="section_import_sdk"></a>
Import SDK Project</h2>
<ol type="1">
<li>Right click on the SalesforceSDK project in the working directory and select <b>Import Projects...</b></li>
<li>Select "Import Existing Projects" option</li>
<li>Finish</li>
</ol>
<h2><a class="anchor" id="section_import_template"></a>
Import Template Project</h2>
<ol type="1">
<li>Right click on the SalesforceAppTemplate project in the working directory and select <b>Import Projects...</b></li>
<li>Select "Import Existing Projects" option</li>
<li>Finish</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>If you want to create a new project from scratch or use your existing project, and link the Salesforce Mobile SDK to it, we have a step-by-step introduction. Please see <a class="el" href="../../d2/dc8/page_install.html">Use the SDK in Existing Project</a>. This template project is a template for cascade native application. Please also refer to <a class="el" href="../../d2/dc8/page_install.html">Use the SDK in Existing Project</a> for how to set up a cascade html5 hybrid application using this SDK.</dd></dl>
<p><br/>
</p>
<h2><a class="anchor" id="section_config_environment"></a>
Configure Environment Variables</h2>
<p>Go to Momentics's <b>Preference-&gt;C/C++-&gt;Build-&gt;Environment</b>, and click <em>"Add"</em>. In the dialog, input <b>SALESFORCE_SDK_LOC</b> as the variable name and set the value to be the absolute path to your SalesforceSDK project. For example: <em>/Workspace_Blackberry/git/SalesforceMobileSDK-BlackBerry10/SalesforceSDK</em> </p>
<dl class="section note"><dt>Note</dt><dd>Remember to update it if you changed your Salesforce SDK location on the file system.</dd></dl>
<h2><a class="anchor" id="section_inspect_application"></a>
Configure the Application</h2>
<ol type="1">
<li>Open your <em>applicationui.hpp</em>, you will see the following code. This makes your ApplicationUI class inherit from <code><a class="el" href="../../d2/d6b/classsf_1_1_s_f_abstract_application_u_i.html" title="Abstract base class for the main application UI class. ">sf::SFAbstractApplicationUI</a>:</code> <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d3/d81/_s_f_abstract_application_u_i_8h.html">core/SFAbstractApplicationUI.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>sf {</div>
<div class="line">    <span class="keyword">class </span>SFGenericTask;</div>
<div class="line">    <span class="keyword">class </span>SFResult;</div>
<div class="line">    <span class="keyword">class </span>SFOAuthInfo;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>ApplicationUI : <span class="keyword">public</span> <a class="code" href="../../d2/d6b/classsf_1_1_s_f_abstract_application_u_i.html">sf::SFAbstractApplicationUI</a></div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The rest of your class members</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Define three const variables in your <em>applicationui.cpp</em>: <div class="fragment"><div class="line">QString <span class="keyword">const</span> <a class="code" href="../../d4/dd0/namespacesf.html#ab0825c181a6f3c43963fb11f25cb781f">sf::SFRemoteAccessConsumerKey</a> = <span class="stringliteral">&quot;Your Force.com&#39;s oAuth client id&quot;</span>;</div>
<div class="line">QString <span class="keyword">const</span> <a class="code" href="../../d4/dd0/namespacesf.html#a3631d6518680633189c7960c7d548006">sf::SFOAuthRedirectURI</a> = <span class="stringliteral">&quot;Your Force.com&#39;s oAuth redirect URI&quot;</span>;</div>
<div class="line">QString <span class="keyword">const</span> <a class="code" href="../../d4/dd0/namespacesf.html#a66aaf23690c020ae86ed11ec6286d67c">sf::SFDefaultRestApiVersion</a> = <span class="stringliteral">&quot;/v29.0&quot;</span>; <span class="comment">//REST API version</span></div>
</div><!-- fragment --></li>
</ol>
<dl class="section note"><dt>Note</dt><dd>The consumer key and redirect URI are persisted on the device. If you want to change it after the application has already been installed on the device, you need to un-install the old application first before the new values takes effect. For more discussion on this please refer to the documentation on <code><a class="el" href="../../d7/d75/classsf_1_1_s_f_account_manager.html" title="Singleton class that manages salesforce.com account info. ">sf::SFAccountManager</a></code> </dd></dl>
<ol type="1">
<li>ApplicationUI's constructor calls the baseclass's constructor: <div class="fragment"><div class="line">ApplicationUI::ApplicationUI(bb::cascades::Application *app) : sf::SFAbstractApplicationUI(app) {</div>
<div class="line"></div>
<div class="line"><span class="comment">//Your own code</span></div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ol>
<p>Now you could build and run your application. If your <code><a class="el" href="../../d4/dd0/namespacesf.html#ab0825c181a6f3c43963fb11f25cb781f">sf::SFRemoteAccessConsumerKey</a></code> and <code><a class="el" href="../../d4/dd0/namespacesf.html#a3631d6518680633189c7960c7d548006">sf::SFOAuthRedirectURI</a></code> is set correctly, you should see Salesforce's oAuth login page automatically loaded at application start up.</p>
<h1><a class="anchor" id="section_usage"></a>
How to Use</h1>
<h2><a class="anchor" id="section_auth"></a>
Authentication</h2>
<p>The <code><a class="el" href="../../d9/d20/classsf_1_1_s_f_authentication_manager.html" title="A singleton class that manages the oAuth 2.0 user agent/refresh flow. ">sf::SFAuthenticationManager</a></code> is responsible for handling all the tasks required to authenticate your application using <a href="https://help.salesforce.com/apex/HTViewHelpDoc?id=remoteaccess_authenticate.htm&amp;language=en_US">oauth 2.0</a>. During the login or logout process, the <code><a class="el" href="../../d9/d20/classsf_1_1_s_f_authentication_manager.html" title="A singleton class that manages the oAuth 2.0 user agent/refresh flow. ">sf::SFAuthenticationManager</a></code> emits various signals so that your application can respond accordingly by connecting to these signals.</p>
<p>The authentication process is triggered automatically on startup if the app has not been authenticated before (you can also trigger the login anywhere in your application by calling the login() function). You can connect to the <code><a class="el" href="../../d9/d20/classsf_1_1_s_f_authentication_manager.html" title="A singleton class that manages the oAuth 2.0 user agent/refresh flow. ">sf::SFAuthenticationManager</a>'s</code> signals this way: </p>
<div class="fragment"><div class="line">SFAuthenticationManager* authManager = SFAuthenticationManager::instance();</div>
<div class="line"><span class="comment">//connect slots</span></div>
<div class="line">connect(authManager, SIGNAL(SFOAuthFlowSuccess(SFOAuthInfo*)), <span class="keyword">this</span>, SLOT(onSFOAuthFlowSuccess(SFOAuthInfo*)), Qt::UniqueConnection);</div>
<div class="line">connect(authManager, SIGNAL(SFOAuthFlowCanceled(SFOAuthInfo*)), <span class="keyword">this</span>, SLOT(onSFOAuthFlowCanceled(SFOAuthInfo*)), Qt::UniqueConnection);</div>
<div class="line">connect(authManager, SIGNAL(SFOAuthFlowFailure(SFOAuthInfo*)), <span class="keyword">this</span>, SLOT(onSFOAuthFlowFailure(SFOAuthInfo*)), Qt::UniqueConnection);</div>
<div class="line">connect(authManager, SIGNAL(SFUserLoggedOut()), <span class="keyword">this</span>, SLOT(onSFUserLoggedOut()), Qt::UniqueConnection);</div>
<div class="line">connect(authManager, SIGNAL(SFLoginHostChanged()), <span class="keyword">this</span>, SLOT(onSFLoginHostChanged()), Qt::UniqueConnection);</div>
<div class="line"><span class="comment">//triggers the login action.</span></div>
<div class="line">authManager-&gt;login();</div>
</div><!-- fragment --><p>In addition, as part of the authentication process the <code><a class="el" href="../../d9/d20/classsf_1_1_s_f_authentication_manager.html" title="A singleton class that manages the oAuth 2.0 user agent/refresh flow. ">sf::SFAuthenticationManager</a></code> will retrieve the identity data of the authenticated user. Based on the mobile policy of the user, the <code><a class="el" href="../../d9/d20/classsf_1_1_s_f_authentication_manager.html" title="A singleton class that manages the oAuth 2.0 user agent/refresh flow. ">sf::SFAuthenticationManager</a></code> will trigger the process asking the user to create a password for locking the app during period of inactivity. This is handled internally by the SDK and is transparent to the application code.</p>
<p>Once authenticated, the access token, refresh token is encrypted and stored on the device along with the identity data of the user. This allows the application to reuse the access token without having to authenticate. If the access token is expired, the SDK automatically refresh the token transparently.</p>
<p>When the user logs out of the application, all the stored credentials are removed from the device. The following is an example of triggering the logout action </p>
<div class="fragment"><div class="line">SFAuthenticationManager* authManager = SFAuthenticationManager::instance();</div>
<div class="line">connect(authManager, SIGNAL(SFUserLoggedOut()), <span class="keyword">this</span>, SLOT(onSFUserLoggedOut()), Qt::UniqueConnection);</div>
<div class="line">authManager-&gt;logout();</div>
</div><!-- fragment --><h2><a class="anchor" id="section_rest"></a>
Sending REST Requests</h2>
<p>You may have noticed by now, our template application uses <code><a class="el" href="../../d2/d6b/classsf_1_1_s_f_abstract_application_u_i.html" title="Abstract base class for the main application UI class. ">sf::SFAbstractApplicationUI</a></code> as the base class of your main business logic class. This base class is responsible for configuring the SDK's related classes. You don't need to do anything at startup (except for the global variable containing the REST API version , see <a class="el" href="../../d5/dfe/page_get_started.html#section_inspect_application">Configure the Application</a>) if you are using standard Force.com's REST API.</p>
<p><code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html" title="The SFRestAPI is the main class to send REST requests to Force.com REST API. ">sf::SFRestAPI</a></code>, <code><a class="el" href="../../d8/d40/classsf_1_1_s_f_rest_request.html" title="The SFRestRequest holds a request that comply with Force.com REST API standard and can be sent using ...">sf::SFRestRequest</a></code> and <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html" title="Generic wrapper class that carry result of any task performed by the SDK. ">sf::SFResult</a></code> are the classes you need to deal with when using Force.com's REST API or APEX REST API. The <code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html" title="The SFRestAPI is the main class to send REST requests to Force.com REST API. ">sf::SFRestAPI</a></code> is the main class for all APIs. You can get the global instance by using <code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html#add50daec5b4a0b0f00ad269d93921041">sf::SFRestAPI::instance()</a></code>. You don't need to explicitly initiate authentication flows in prior to use the REST APIs. The SDK automatically attempt to login or refresh access token if user logged out or session is expired. It also re-send all failed requests after the refreshing attempt succeeded.</p>
<p>The SDK REST classes are designed to be accessible from both C++ and QML. Some APIs contains different function signatures for C++ and QML.</p>
<h3><a class="anchor" id="cplusplus_usage"></a>
Send REST Request from C++</h3>
<p>All REST requests are sent asynchronously and comply with Qt's signal-slot pattern. You need to declare a SLOT to handles REST results: </p>
<div class="fragment"><div class="line"><span class="comment">//In ApplicationUI.hpp</span></div>
<div class="line">   <span class="keyword">class </span>ApplicationUI : <span class="keyword">public</span> <a class="code" href="../../d2/d6b/classsf_1_1_s_f_abstract_application_u_i.html">sf::SFAbstractApplicationUI</a></div>
<div class="line">   {</div>
<div class="line">       Q_OBJECT</div>
<div class="line"><span class="keyword">public</span> slots:</div>
<div class="line">   <span class="keywordtype">void</span> onRestResultReady(<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html">sf::SFResult</a> *result);</div>
<div class="line"></div>
<div class="line">   <span class="comment">//Your own code</span></div>
<div class="line">};</div>
</div><!-- fragment --><p><br/>
To send a REST request, you use <code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html" title="The SFRestAPI is the main class to send REST requests to Force.com REST API. ">sf::SFRestAPI</a></code> to create a <code><a class="el" href="../../d8/d40/classsf_1_1_s_f_rest_request.html" title="The SFRestRequest holds a request that comply with Force.com REST API standard and can be sent using ...">sf::SFRestRequest</a></code> instance and use <code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html#a86670774e98a2e5e40df95022f014b4e">sf::SFRestAPI::sendRestRequest(SFRestRequest*,QObject*,const char*,const QVariant &amp;)</a></code> to send: </p>
<div class="fragment"><div class="line"><span class="comment">//in ApplicationUI.cpp</span></div>
<div class="line">QStringList fields = QStringList() &lt;&lt; <span class="stringliteral">&quot;Id&quot;</span> &lt;&lt; <span class="stringliteral">&quot;Name&quot;</span>;</div>
<div class="line">QString query = SFRestAPI::instance()-&gt;generateSOQLQuery(fields, <span class="stringliteral">&quot;Account&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, QStringList(), <span class="stringliteral">&quot;&quot;</span>, QStringList(), 5);</div>
<div class="line">SFRestRequest * request = SFRestAPI::instance()-&gt;requestForQuery(query);</div>
<div class="line">SFRestAPI::instance()-&gt;sendRestRequest(request, <span class="keyword">this</span>, SLOT(onRestResultReady(<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html">sf::SFResult</a>*)));</div>
</div><!-- fragment --><p><br/>
And you need to implement the SLOT we declared earlier: </p>
<div class="fragment"><div class="line"><span class="comment">//in ApplicationUI.cpp</span></div>
<div class="line"><span class="keywordtype">void</span> ApplicationUI::onRestResultReady(<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html">sf::SFResult</a> *result) {</div>
<div class="line">    QString msg(<span class="stringliteral">&quot;REST Result:\n&quot;</span>);</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;REST Result:&quot;</span> &lt;&lt; result;</div>
<div class="line">    <span class="keywordflow">if</span> (!result-&gt;<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html#a1d3f6e06af8d6a51d8b7cfeb55b40ae3">hasError</a>()) {</div>
<div class="line">        QVariant payload = result-&gt;<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html#aa43403a8aa2e0bb9c6f7d01bc1aadab8">payload</a>&lt;QVariant&gt;();</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Add your own code to handle the payload</span></div>
<div class="line"></div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;payload:&quot;</span> &lt;&lt; payload;</div>
<div class="line">        bb::data::JsonDataAccess jda;</div>
<div class="line">        QByteArray buffer;</div>
<div class="line">        jda.saveToBuffer(payload, &amp;buffer);</div>
<div class="line">        msg.append(<span class="stringliteral">&quot;payload: &quot;</span>).append(QString(buffer));</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">        <span class="comment">//Add your own code to handle errors</span></div>
<div class="line"></div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Error code:&quot;</span> &lt;&lt; result-&gt;<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html#ac519277488b2ba58307e7fecb20eb307">code</a>() &lt;&lt; <span class="stringliteral">&quot;Message:&quot;</span> &lt;&lt; result-&gt;<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html#aa9ae07976ae222975bd75339788f530e">message</a>();</div>
<div class="line">        msg.append(<span class="stringliteral">&quot;Error code: &quot;</span>).append(QString::number(result-&gt;<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html#ac519277488b2ba58307e7fecb20eb307">code</a>())).append(<span class="stringliteral">&quot; Message: &quot;</span>).append(result-&gt;<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html#aa9ae07976ae222975bd75339788f530e">message</a>());</div>
<div class="line"> }</div>
<div class="line">    mConsoleLabel-&gt;setText(msg);</div>
<div class="line">}</div>
</div><!-- fragment --><p> If there is no error, the code above outputs the payload, which is a <code>QVariant</code> containing <code>QVariantMap</code> or <code>QVariantList</code>. It outputs error code and message if the task failed. mConsoleLabel is a <code>sf::Label</code> pointer to a output console field on your screen.</p>
<h3><a class="anchor" id="qml_usage"></a>
Send REST Request from QML</h3>
<p>It's also very easy to send REST requests from QML and handle the result using JavaScript. </p>
<div class="fragment"><div class="line"><span class="comment">//in your qml</span></div>
<div class="line">Button {</div>
<div class="line">    <span class="keywordtype">id</span>: button</div>
<div class="line">    text: <span class="stringliteral">&quot;Send REST Request(QML)&quot;</span></div>
<div class="line">        onClicked: {</div>
<div class="line">            var request = SFRestAPI.requestForDescribeObject(<span class="stringliteral">&quot;Account&quot;</span>);</div>
<div class="line">            SFRestAPI.sendRestRequest(request, button, button.onTaskResultReady)</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">function</span> onTaskResultReady(result) {</div>
<div class="line">            <span class="comment">//Handle result as SFResult</span></div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment --><p> You could access result's <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html#ac519277488b2ba58307e7fecb20eb307">sf::SFResult::code</a></code>, <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html#aa9ae07976ae222975bd75339788f530e">sf::SFResult::message</a></code>, <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html#aa43403a8aa2e0bb9c6f7d01bc1aadab8">sf::SFResult::payload</a></code>, <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html#ae3ff28cdbdceab41e4d19524949cc13e">sf::SFResult::tags</a></code> and <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html#a1d3f6e06af8d6a51d8b7cfeb55b40ae3">sf::SFResult::hasError</a></code>. The payload is automatically converted into javascript Object or Array.</p>
<h3><a class="anchor" id="apex_support"></a>
Force.com's APEX REST APIs</h3>
<p>If you have customized REST APIs written in APEX, the standard requests might not be suitable for you. You can use <code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html#a93c9b8b0f3dd55a9cd76e589c456347f">sf::SFRestAPI::customRequest()</a></code> to create your own customized request.</p>
<p><b>For move advanced usage of REST classes, See</b> <code><a class="el" href="../../d9/d10/classsf_1_1_s_f_rest_a_p_i.html" title="The SFRestAPI is the main class to send REST requests to Force.com REST API. ">sf::SFRestAPI</a></code>, <code><a class="el" href="../../d8/d40/classsf_1_1_s_f_rest_request.html" title="The SFRestRequest holds a request that comply with Force.com REST API standard and can be sent using ...">sf::SFRestRequest</a></code>, <code><a class="el" href="../../d9/dd1/classsf_1_1_s_f_result.html" title="Generic wrapper class that carry result of any task performed by the SDK. ">sf::SFResult</a></code> </p>
<h2><a class="anchor" id="section_settings"></a>
Launch Setting Screen</h2>
<p>The SDK provides a default setting screen. The setting screen allows the user to switch between production and sandbox environments. To use this feature, your application needs to present the setting screen and handle the SFLoginHostChanged signal.</p>
<p>The following example adds a trigger to the setting screen from the TabbedPane's menu. </p>
<div class="fragment"><div class="line"><span class="keyword">import</span> bb.cascades 1.0</div>
<div class="line">import <span class="stringliteral">&quot;./salesforce&quot;</span></div>
<div class="line"><span class="keyword">import</span> sf 1.0</div>
<div class="line">TabbedPane {</div>
<div class="line">    <span class="keywordtype">id</span>: tabbedPane</div>
<div class="line">    <span class="keyword">property</span> Sheet settingsSheet;</div>
<div class="line">    showTabsOnActionBar: <span class="keyword">true</span></div>
<div class="line"></div>
<div class="line">    Menu.definition: MenuDefinition {</div>
<div class="line">        actions: [</div>
<div class="line">            <span class="comment">//your actions...</span></div>
<div class="line">        ]</div>
<div class="line">        settingsAction: SettingsActionItem {</div>
<div class="line">            onTriggered: {</div>
<div class="line">                <span class="comment">//We display SFSettings in a sheet. You can choose your own way to display it</span></div>
<div class="line">                console.debug(<span class="stringliteral">&quot;setting action triggered&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (!settingsSheet){</div>
<div class="line">                    settingsSheet = settingsSheetDef.createObject(tabbedPane);</div>
<div class="line">                }</div>
<div class="line">                settingsSheet.open();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        attachedObjects: [</div>
<div class="line">            ComponentDefinition {</div>
<div class="line">                <span class="keywordtype">id</span>: settingsSheetDef</div>
<div class="line">                Sheet {</div>
<div class="line">                    <span class="keywordtype">id</span>: settingsSheet</div>
<div class="line">                    peekEnabled: <span class="keyword">false</span>;</div>
<div class="line">                    content: SFSettings {</div>
<div class="line">                        titleBar: TitleBar {</div>
<div class="line">                            title: qsTr(<span class="stringliteral">&quot;Settings&quot;</span>)</div>
<div class="line">                            dismissAction: ActionItem {</div>
<div class="line">                                title: <span class="stringliteral">&quot;Back&quot;</span></div>
<div class="line">                                imageSource: <span class="stringliteral">&quot;asset:///images/icon_previous.png&quot;</span></div>
<div class="line">                                onTriggered: {</div>
<div class="line">                                    settingsSheet.close();</div>
<div class="line">                                }</div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        paneProperties: NavigationPaneProperties {</div>
<div class="line">                            backButton: ActionItem {</div>
<div class="line">                                title: <span class="stringliteral">&quot;Back&quot;</span></div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    onClosed: {</div>
<div class="line">                        console.debug(<span class="stringliteral">&quot;destroy settings page&quot;</span>);</div>
<div class="line">                        settingsSheet.destroy();</div>
<div class="line">                        SFAccountManager.updateLoginHost();</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        ]</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    Tab {</div>
<div class="line">        <span class="comment">//your tabs</span></div>
<div class="line">    }</div>
<div class="line"> }</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The code above demonstrates how to trigger the setting page from <code>Menu</code> and display it in a <code>Sheet</code>. You can have your own version for presenting the setting page. For example, push it to your main <code>NavigationPane</code>, or load a new <code>Tab</code> in your <code>TabbedPane</code> </dd></dl>
<p><br/>
To listen to the login host signal </p>
<div class="fragment"><div class="line">SFAuthenticationManager* authManager = SFAuthenticationManager::instance();</div>
<div class="line">   connect(authManager, SIGNAL(SFLoginHostChanged()), <span class="keyword">this</span>, SLOT(onSFLoginHostChanged()), Qt::UniqueConnection);</div>
</div><!-- fragment --><h2><a class="anchor" id="section_revoke"></a>
Revoking Tokens</h2>
<p>Usually you don't need to revoke your access tokens from within your application, but in case you need to do it, you can do it with the following code. </p>
<div class="fragment"><div class="line">   <span class="keyword">const</span> SFOAuthCredentials * credentials = SFRestAPI::instance()-&gt;currentCredentials();</div>
<div class="line">QString accessToken = credentials ? credentials-&gt;getAccessToken() : QString();</div>
<div class="line">QString path = QString(<span class="stringliteral">&quot;https://%1/services/oauth2/revoke?token=%2&quot;</span>).arg(SFAuthenticationManager::instance()-&gt;loginHost(), accessToken);</div>
<div class="line">SFNetworkAccessTask *task = <span class="keyword">new</span> SFNetworkAccessTask(<a class="code" href="../../d4/dd0/namespacesf.html#a3c8e6c634bcc352bfccc5f3da2add7f4">getSharedNetworkAccessManager</a>(), path, HTTPMethod::HTTPGet);</div>
<div class="line">connect(task, SIGNAL(taskFinished(<a class="code" href="../../d0/def/classsf_1_1_s_f_generic_task.html">sf::SFGenericTask</a>*)), <span class="keyword">this</span>, SLOT(onNetworkTaskFinished(<a class="code" href="../../d0/def/classsf_1_1_s_f_generic_task.html">sf::SFGenericTask</a>*)));</div>
<div class="line">task-&gt;startTaskAsync(<span class="keyword">this</span>, SLOT(onNetworkResultReady(<a class="code" href="../../d9/dd1/classsf_1_1_s_f_result.html">sf::SFResult</a>*)));</div>
</div><!-- fragment --><p> You can revoke the refresh token in a similar manner. Note that this revokes the token on the server side which makes the existing token used by your device invalid.</p>
<h1><a class="anchor" id="section_more_info"></a>
More Samples</h1>
<h2><a class="anchor" id="section_demo"></a>
Demo Application</h2>
<p>Please check out the project <b>SalesforceSDKDemo</b> and <b>SalesforceSDKHybridDemo</b> under same repository for complete code sample of native and hybrid application using this SDK. Please make sure your environment variable is configured as described in the beginning of this article before trying these samples.</p>
<h2><a class="anchor" id="section_explorer"></a>
Salesforce REST Explorer on Blackberry 10</h2>
<p>Please check out <a href="https://github.com/KiiMobileTech/SalesforceRestExplorer">https://github.com/KiiMobileTech/SalesforceRestExplorer</a> for the REST Explorer sample project.</p>
<dl class="section author"><dt>Author</dt><dd>Livan Yi Du </dd>
<dd>
Tim Shi </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 5 2013 15:42:08 for Blackberry10SDKforSalesforceMobile by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
